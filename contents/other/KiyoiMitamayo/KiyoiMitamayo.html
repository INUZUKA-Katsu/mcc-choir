<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" type="image/png" sizes="16x16" href="/mcc/img/favicon.ico">
    <link rel="stylesheet" href="/css/choir.css">
    <script src="/js/get_mp3.js"></script>
    <script src="/js/get_information.js"></script>
    <script src="/js/svgPiano.js"></script>
    <script src="/js/howler.core.js"></script>
    <script src="https://unpkg.com/@tonejs/midi"></script>
		<script type='text/javascript'>
        const mp3Files = {
          soprano : "/other/KiyoiMitamayo/KiyoiMitamayo(soprano).mp3",
          alto    : "/other/KiyoiMitamayo/KiyoiMitamayo(alto).mp3",
          tenor   : "/other/KiyoiMitamayo/KiyoiMitamayo(tenor).mp3",
          bass    : "/other/KiyoiMitamayo/KiyoiMitamayo(bass).mp3",
          full    : "/other/KiyoiMitamayo/KiyoiMitamayo(full).mp3",
          vcl_soprano : "/other/KiyoiMitamayo/KiyoiMitamayo(vcl_soprano).mp3",
          vcl_alto    : "/other/KiyoiMitamayo/KiyoiMitamayo(vcl_alto).mp3",
          vcl_tenor   : "/other/KiyoiMitamayo/KiyoiMitamayo(vcl_tenor).mp3",
          vcl_bass    : "/other/KiyoiMitamayo/KiyoiMitamayo(vcl_bass).mp3",
          vcl_full    : "/other/KiyoiMitamayo/KiyoiMitamayo(vcl_full).mp3",
          bpm108_soprano : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_soprano).mp3",
          bpm108_alto    : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_alto).mp3",
          bpm108_tenor   : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_tenor).mp3",
          bpm108_bass    : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_bass).mp3",
          bpm108_full    : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_full).mp3",
          bpm108_vcl_soprano : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_vcl_soprano).mp3",
          bpm108_vcl_alto    : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_vcl_alto).mp3",
          bpm108_vcl_tenor   : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_vcl_tenor).mp3",
          bpm108_vcl_bass    : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_vcl_bass).mp3",
          bpm108_vcl_full    : "/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108_vcl_full).mp3"
        };
        const midiFiles = {
          soprano: ['/other/KiyoiMitamayo/KiyoiMitamayo.mid',0],
          alto:    ['/other/KiyoiMitamayo/KiyoiMitamayo.mid',1],
          tenor:   ['/other/KiyoiMitamayo/KiyoiMitamayo.mid',2],
          bass:    ['/other/KiyoiMitamayo/KiyoiMitamayo.mid',3],
          full:    ['/other/KiyoiMitamayo/KiyoiMitamayo.mid',[0,1,2,3]],
          bpm108_soprano : ["/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108).mid",0],
          bpm108_alto    : ["/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108).mid",1],
          bpm108_tenor   : ["/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108).mid",2],
          bpm108_bass    : ["/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108).mid",3],
          bpm108_full    : ["/other/KiyoiMitamayo/bpm108/KiyoiMitamayo(bpm108).mid",[0,1,2,3]]
        }
		</script>
		<style type="text/css">
      div.audio-container {
        height: 30px;
        width: 400px;
        display: flex;
        flex-direction: row;
        align-items: center;
        margin-bottom: 10px;
        gap: 5px
      }
      span.timeDisplay {
        width: auto;
        font-size: 12px;
        text-wrap: nowrap;
      }
      li {height: 120px;}
      li div {width: "";}
      div#lyric-container {
        display:flex;
        flex-direction:row;
        gap:0;
        align-items:center;
        justify-content:center;
      }
      @media screen and (max-width: 700px) {
        div#lyric-container {
          flex-direction:column;
        }
      }
		</style>
    <title>'聖い御霊よ'パート別練習用音源</title>
	</head>
	<body>
<div class='body'>
<h1>パート別練習用音源</h1>
<div id="lyric-container">
  <div class='nen'>
    <h4>聖い御霊よ </h4>
    <div style="margin-left:2em;">
      ※ 陽子姉妹の指示に合わせてテンポを少し早くしました。<br />
      　下のボタンでテンポを切替えられます<br />
      　<button type="button" onclick="change_bpm()" id="btn">
          テンポを元に戻す（bpm=108⇒96）
        </button>
    </div>
    <ul style="list-style: none;">
      <li>
        <div class="part">ソプラノ</div>
        <div class="audio-container" name="bpm108_soprano"></div>
        <div class="vcl">AI Vocal</div>
        <div class="audio-container" name="bpm108_vcl_soprano"></div>
      </li>
      <li>
        <div class="part">アルト</div>
        <div class="audio-container" name="bpm108_alto"></div>
        <div class="vcl">AI Vocal</div>
        <div class="audio-container" name="bpm108_vcl_alto"></div>
      </li>
      <li>
        <div class="part">テノール</div>
        <div class="audio-container" name="bpm108_tenor"></div>
        <div class="vcl">AI Vocal</div>
        <div class="audio-container" name="bpm108_vcl_tenor"></div>
      </li>
      <li>
        <div class="part">バス</div>
        <div class="audio-container" name="bpm108_bass"></div>
        <div class="vcl">AI Vocal</div>
        <div class="audio-container" name="bpm108_vcl_bass"></div>
      <li>
        <div class="part">コーラス</div>
        <div class="audio-container" name="bpm108_full"></div>
        <div class="vcl">AI Vocal</div>
        <div class="audio-container" name="bpm108_vcl_full"></div>
      </li>
    </ul>
  </div>
  <div class="lyrics">
    <p>いま　きよいみたまよ</p>
    <p>このわたしを</p>
    <p>みたして　ください</p>
    <br>
    <p>主の　御座からながれ</p>
    <p>このわたしを</p>
    <p>きよめてください</p>
    <br>
    <p>みたまにあふれ生きる</p>
    <p>主の栄光　あおいで</p>
    <br>
    <p>みたまにあふれ生きる</p>
    <p>主のみわざ　あおいで</p>
  </div>
</div>

<div id="piano-container"></div>

<br>
<div class="nen">
    <div class="apendix"><a href='#' onclick="plus_password('./聖い御霊よ.pdf')">楽　譜</a></div>
    <br>
    <div class="apendix">連　絡</div>
    <div class="textarea1">
      <textarea id="comuBoard" readonly cols="32" rows="10"><!--連絡事項--></textarea>
    </div>
    <br>
    <div class="textarea2">
      <label for="returnText">連絡事項の先頭に追記する</label>
      <textarea id="returnText" cols="32" rows="5"></textarea>
      <div class="input">
        <input type="button" name="return" value="実行" onclick="addText()">
        <input type="button" name="cancel" value="キャンセル" onclick="cancelText()" style="margin-left:5px;">
      </div>
    </div>
    <br>
    <div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/WSZRgfL3JvE?si=a29ZNwPBXoteZ9c9" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>    </div>

  </ul>
</div>

<div class='link'><a href='/mcc/index.html'>⇒ MCCワーシップクワイアーの持ち歌のページに戻る.</a></div>
</div>
<script>
  const svgPiano = new SvgPiano(
    'piano-container',
    {
        min_key_number: 41,
        number_of_white_keys: 22,
        white_key_width: 30,
        white_key_height: 120,
        black_key_width: 24,
        black_key_height: 70,
        volume: 0.5
    }
  );

  // パート別に play,pause,stopの各ボタン、seekBar,timeDisplay を作成
  const audioControls = setAudioControls(".audio-container");

  // audioControlインスタンスに、svgPiano,midiファイル,mp3ファイル等を設定
  audioControls.forEach(audioControl => {
    const name = audioControl.options.name;
    audioControl.update({
        svgPiano: svgPiano,
        mp3File: mp3Files[name],
        midiFile: midiFiles[name.replace('vcl_', '')][0],
        trackIndex: midiFiles[name.replace('vcl_', '')][1],
    });
  });

  function change_bpm(){
    let tmp108 = null;
    let elm=document.getElementById("btn");
    let text=elm.innerHTML;
    if(text.match(/テンポを元に戻す（bpm\=108⇒96）/)){
      //bpm96に変更
      tmp108 = false;
      elm.innerHTML="テンポを早くする（bpm=96⇒108）";
    }else{
      //bpm108に変更
      tmp108 = true;
      elm.innerHTML="テンポを元に戻す（bpm=108⇒96）";
    }
    window.audioControls.forEach(audioControl => {
      const name = audioControl.options.name;
      if (tmp108 && !name.match(/bpm108/)){
        audioControl.update({
          name: 'bpm108_'+name,
          mp3File: mp3Files[ 'bpm108_'+name ],
          midiFile: midiFiles[ 'bpm108_'+name.replace('vcl_', '') ][0],
          trackIndex: midiFiles[ 'bpm108_'+name.replace('vcl_', '') ][1],
        });
        console.log(mp3Files[ 'bpm108_'+name ])
        console.log(midiFiles[ 'bpm108_'+name.replace('vcl_', '') ][0])

      }else if (!tmp108 && name.match(/bpm108/)){
        audioControl.update({
          name: name.replace(/bpm108_/,''),
          mp3File: mp3Files[ name.replace(/bpm108_/,'') ],
          midiFile: midiFiles[ name.replace(/bpm108_(vcl_)?/,'') ][0],
          trackIndex: midiFiles[ name.replace(/bpm108_(vcl_)?/,'') ][1],
        });
        console.log(mp3Files[ name.replace(/bpm108_/,'') ])
        console.log(midiFiles[ name.replace(/bpm108_(vcl_)?/,'') ][0])
      }
    });
  }
</script>
	</body>
</html>