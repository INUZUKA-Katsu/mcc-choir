<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon.ico">
    <script src="/js/howler.core.js"></script>
    <script src="https://unpkg.com/@tonejs/midi"></script>
    <script src="/js/get_mp3.js"></script>
    <script src="/js/get_information.js"></script>
    <script src="/js/svgPiano.js"></script>
    <script type='text/javascript'>
      const mp3Files = {
        soprano : '/other/Carry Me/Carry Me(soprano).mp3',
        alto    : '/other/Carry Me/Carry Me(alto).mp3',
        tenor   : '/other/Carry Me/Carry Me(tenor).mp3',
        bass    : '/other/Carry Me/Carry Me(bass).mp3',
        full    : '/other/Carry Me/Carry Me(full).mp3',
        soprano25 : '/other/Carry Me/01 Carry Me(soprano,25).mp3',
        alto25    : '/other/Carry Me/02 Carry Me(alto,25).mp3',
        tenor25   : '/other/Carry Me/03 Carry Me(tenor,25).mp3',
        bass25    : '/other/Carry Me/04 Carry Me(bass,25).mp3',
        full25    : '/other/Carry Me/05 Carry Me(full,25).mp3',
        soprano35 : '/other/Carry Me/01 Carry Me(soprano,35).mp3',
        alto35    : '/other/Carry Me/02 Carry Me(alto,35).mp3',
        tenor35   : '/other/Carry Me/03 Carry Me(tenor,35).mp3',
        bass35    : '/other/Carry Me/04 Carry Me(bass,35).mp3',
        full35    : '/other/Carry Me/05 Carry Me(full,35).mp3',
      };
      const midiFiles = {
        soprano : ['/other/Carry Me/Carry Me.mid',0],
        alto    : ['/other/Carry Me/Carry Me.mid',1],
        tenor   : ['/other/Carry Me/Carry Me.mid',2],
        bass    : ['/other/Carry Me/Carry Me.mid',3],
        full    : ['/other/Carry Me/Carry Me.mid',[0,1,2,3]],
        soprano25 : ['/other/Carry Me/Carry Me.mid',0,74.4],
        alto25    : ['/other/Carry Me/Carry Me.mid',1,74.4],
        tenor25   : ['/other/Carry Me/Carry Me.mid',2,74.4],
        bass25    : ['/other/Carry Me/Carry Me.mid',3,74.4],
        full25    : ['/other/Carry Me/Carry Me.mid',[0,1,2,3],74.4],
        soprano35 : ['/other/Carry Me/Carry Me.mid',0,130.7], 
        alto35    : ['/other/Carry Me/Carry Me.mid',1,130.7],
        tenor35   : ['/other/Carry Me/Carry Me.mid',2,130.7],
        bass35    : ['/other/Carry Me/Carry Me.mid',3,130.7],
        full35    : ['/other/Carry Me/Carry Me.mid',[0,1,2,3],130.7],
      }
		</script>
		<style type="text/css">
			div.h4   {font-size:1.2em;font-style:oblique;}
			div.nen  {margin-top:1em;}
      h4       {margin:1em 0 1em 1em;font-size:150%;font-style:oblique;}
      li       {margin-left:0;}
      audio    {height:24px;}
      div.words {width:300px;
                 margin-top : 2.5em; 
                 margin-left: auto; margin-right: auto;
                 /*border: solid 1px #0000ff; */
                }
      div.link {margin-left:2em;margin-top:2em; }
      p {line-height: 1.5em;padding:0;margin:0;}
      span.u {border-bottom: solid 2px orange;}
      span.b {font-weight:bold;}
      div.audio-container {
        height: 30px;
        width: 400px;
        display: flex;
        flex-direction: row;
        align-items: center;
        margin-bottom: 10px;
        gap: 5px
      }
      span.timeDisplay {
        width: auto;
        font-size: 12px;
        text-wrap: nowrap;
      }
      div.segment-btn-container {
        width: auto;
        display: block;
        margin-bottom: 10px;
      }
      div.segment-btn-container button {
        width: auto;
        height: 1.6em;
        margin-right: 5px;
      }
      div#piano-container {
        margin-bottom: 2em;
      }
      li {height: auto;}
      li div {width: "";}

      @media screen and (min-width: 700px){
        h4       {margin-bottom: 1em;}
        li       {margin-left:1em;margin-bottom:2em;}
        li div   {display:inline-block;vertical-align:middle;width:6em;}
        div.words {position: absolute;
                   top:1em;
                   right:1em;}
      }
      @media screen and (min-width: 830px){
        h4        {margin-bottom: 2em;}
        li        {margin-left:2em;}
        div.words {right:4em;}
      }
      @media screen and (min-width: 1000px){
        div.body {width: 830px;
                  margin-left: auto; margin-right: auto;
                 }
        div.words {right:10em;}
      }
		</style>
    <link rel="stylesheet" href="/css/choir.css">
    <title>'Carry Me'パート別練習用音源</title>
	</head>
	<body>
<div class='body'>
<h1>パート別練習用音源</h1>

<div class='nen'>
  <h4>Carry Me</h4>
  <ul style="list-style: none;">
    <li>
      <div class="part">ソプラノ</div>
      <div class="audio-container" name="soprano"></div>
      <div class="segment-btn-container" name="soprano">
      <button class="playBtn" name="soprano25">ほほをつたわる(25)</button>
      <button class="playBtn" name="soprano35">主よあがめます(35)</button>
    <li>
      <div class="part">アルト</div>
      <div class="audio-container" name="alto"></div>
      <div class="segment-btn-container" name="alto">
      <button class="playBtn" name="alto25">ほほをつたわる(25)</button>
      <button class="playBtn" name="alto35">主よあがめます(35)</button>
    </li>
    <li>
      <div class="part">テナー</div>
      <div class="audio-container" name="tenor"></div>
      <div class="segment-btn-container" name="tenor">
      <button class="playBtn" name="tenor25">ほほをつたわる(25)</button>
      <button class="playBtn" name="tenor35">主よあがめます(35)</button>
    </li>
    <li>
      <div class="part">バス</div>
      <div class="audio-container" name="bass"></div>
      <div class="segment-btn-container" name="bass">
      <button class="playBtn" name="bass25">ほほをつたわる(25)</button>
      <button class="playBtn" name="bass35">主よあがめます(35)</button>
    </li>
    <li>
      <div class="part">コーラス</div>
      <div class="audio-container" name="full"></div>
      <div class="segment-btn-container" name="full">
      <button class="playBtn" name="full25">ほほをつたわる(25)</button>
      <button class="playBtn" name="full35">主よあがめます(35)</button>
    </li>
  </ul>
</div>
<div id="piano-container"></div>
<div class='words'>
<p>（A）Carry me　わが主</p>
<p>　　あいの　みつばさのかげに</p>
<p>　　おらせ　たまえ</p>
<p>　　わたしを</p>
<p>　　Carry me</p>
<br>
<p>（A）Carry me　わが主</p>
<p>　　やすき　みつばさのかげに</p>
<p>　　おらせ　たまえ</p>
<p>　　わたしを</p>
<p>　　Carry me</p>
<br>
<p>（B）ほほをつたわる</p>
<p>　　なみだのわけを</p>
<p>　　あなたは　知っている</p>
<p>　　くらやみのなか</p>
<p>　　いたみのなか</p>
<p>　　あなたは　おられる</p>
<br>
<p>（A）Carry me　わが主</p>
<p>　　やすき　みつばさのかげに</p>
<p>　　おらせ　たまえ</p>
<p>　　わたしを</p>
<p>　　Carry me</p>
<br>
<p>（C）主よ　もとめます</p>
<p>　　あなたの愛</p>
<p>　　わたしのすべて　ささげます</p>
<br>
<p>（A）Carry me　わが主</p>
<p>　　あいの　みつばさのかげに</p>
<p>　　おらせ　たまえ</p>
<p>　　わたしを</p>
<p>　　Carry me</p>
<p>　　Carry me</p>
<p>　　Carry me</p>
<br />
</div>
<p style="text-align:center;">楽譜（繰返し部分を独立のページにすることで楽譜上の繰り返しをなくしたもの）
  <br /><br />
  <a href='#' onclick="plus_password('./Carry Me.pdf')"><img src="https://i.gyazo.com/89f45833794dd757ef41c9fb27521ceb.png" width="50%"></a>
</p>

  <div class='link'>
    <a href='../Give Thanks(Em)/Give Thanks(Em).html'>⇒ 大いなる方に(変ホ長調)</a><br>
    <a href='/mcc/index.html'>⇒ MCCワーシップクワイアーの持ち歌のページに戻る.</a>
  </div>

</div>
<script>
  const svgPiano = new SvgPiano(
    'piano-container',
    {
        min_key_number: 39,
        number_of_white_keys: 28,
        white_key_width: 30,
        white_key_height: 120,
        black_key_width: 24,
        black_key_height: 70,
        volume: 0.5,
        key: ['♭3','♯4','♭1'],
        justIntnation: true
    }
  );

  // パート別に play,pause,stopの各ボタン、seekBar,timeDisplay を作成
  const audioControls = setAudioControls(".audio-container");

  // audioControlインスタンスに、svgPiano,midiファイル,mp3ファイル等を設定
  audioControls.forEach(audioControl => {
    const name = audioControl.options.name;
    audioControl.update({
      svgPiano: svgPiano,
      mp3File: mp3Files[name],
      midiFile: midiFiles[name][0],
      trackIndex: midiFiles[name][1],
      OFFSET: 1.3,
    });
  });

  // audioControlに部分練習用のファイルセットを追加
  const segmentButtons = document.querySelectorAll(".playBtn");
  segmentButtons.forEach(btn => {
    const name = btn.getAttribute("name");
    const parentName = btn.parentNode.getAttribute("name");
    const audioControl = audioControls.find(control => control.options.name === parentName );
    setTimeout(() => {
      audioControl.addFileSet({
        mp3File: mp3Files[name],
        midiFile: midiFiles[name][0],
        trackIndex: midiFiles[name][1],
        midiStart: midiFiles[name][2],
        OFFSET: 1.3,
        name: name
      });
    }, 200);
  });

  // 部分練習用のボタンのイベントリスナーを設定
  document.querySelectorAll(".playBtn").forEach(btn => {
    btn.addEventListener("click", function() {
      const name = btn.getAttribute("name");
      const parentName = btn.parentNode.getAttribute("name");
      const audioControl = audioControls.find(control => control.options.name === parentName );
　　　 const index = audioControl.options.fileSets.findIndex(set => set.name === name);
      if (audioControl.options.currentFileSetIndex !== index) {
        audioControl.switchFileSet(name);
        setTimeout(() => {
          audioControl.play();
        }, 500);
      } else {
        audioControl.play();  
      }
    });
  });
</script>
	</body>
</html>